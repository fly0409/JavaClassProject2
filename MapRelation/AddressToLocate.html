<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>


<style>
    html,body{
      width: 100%;
      height: 100%;
      }
      #map { width: 40%;height: 60%; }  

  </style>



<body>   
    <div id="map">

    </div>
    <input type="text" id="addr">請輸入地址<br>
    經度<input type="text" id="lat"><br>
    緯度<input type="text" id="lng">
    <button onclick="startTrans()">go</button>
    
    

    <script>
    var map;
    function initMap(){
        map = new google.maps.Map(document.getElementById('map'), { center: {lat: 25.033710, lng: 121.564718}, zoom: 15});
        var marker = new google.maps.Marker({position: {lat: 25.033710, lng: 121.564718}, map: map});
    }

    

    function startTrans(){
        let addr=document.getElementById("addr").value;
        console.log(addr);
        addressToLocation(addr);
        // console.log(document.getElementById("lat").value);      
    
    }





    
    function addressToLocation(addr){
        let longitude;
        let latitude;
        let loca;
        var geocoder = new google.maps.Geocoder(); 
        geocoder.geocode({'address': addr }, function (results, status){
            if (status == google.maps.GeocoderStatus.OK) {
                longitude=results[0].geometry.location.lng();
               
                latitude=results[0].geometry.location.lat();

                let lat=document.getElementById("lat");
                lat.value=longitude;
                let lng=document.getElementById("lng");
                lng.value=latitude
        }else{}
        })

    }
    
    


    </script>

    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBTUCen4YixtEKjNBAL4CX5xkW1QQAembQ&callback=initMap" async defer></script>

</body>


</html>